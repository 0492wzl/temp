---
title: Linux养成
date: 2016-08-27 23:35:32 
categories: Linux
tags: Linux

---


## 命令基本格式及文件处理命令 ##

### 命令基本格式 ###
- `[root@localhost ~]#`  
	`root`:当前登陆用户  
	`localhost`:主机名  
	`~`:当前所在目录(家目录)  
	`#`:超级用户提示符，普通用户提示符为`$`  

<!--more-->

### 常用目录作用 ###
- /	根目录
- /bin		命令保存目录(普通用户就可以读取的命令)
- /sbin		命令保存目录(超级用户才能使用的命令)
- /boot		启动目录，启动相关文件
- /dev		设备文件保存目录
- /etc		配置文件保存目录
- /home		普通用户的家目录
- /lib		系统库保存目录
- /mnt		系统挂载目录
- /medir		挂载目录
- /root		超级用户的家目录
- /tmp		临时目录
- /proc		直接写入内存的，不能直接操作，目录保存的是内存的过载点
- /sys		同/proc
- /var		系统相关文档内容
- /usr		系统软件资源目录
  - /usr/bin		系统命令(普通用户)
  - /usr/sbin	系统命令(超级用户)

### 目录操作 ###
- 查看目录 `ls [选项] [文件或目录]`  
	选项:  
	1. `-a` 显示所有文件，包括隐藏文件  
	2. `-l` 显示详细信息 **别名为`# ll`**  
		<pre>
		# ls -l
	
		总用量 44
		权限 	引用计数	文件所有者	所属组	大小(kb)	最后修改时间	文件名
		-rw-------. 1 		root 		root  	1272 		8月  27 23:03 	anaconda-ks.cfg
		-rw-r--r--. 1 		root 		root 	27338 		8月  27 23:03 	install.log
		-rw-r--r--. 1 		root 		root  	7572 		8月  27 23:01 	install.log.syslog
		</pre>
	
		`-rw-r--r--.`
		权限，一共10位，第1位`-`为文件类型，一共有7种文件类型，其中3个常用的为`-:文件``d:目录``l软链接文件`，其它4个是块设备文件、字符设备文件、套接字文件和管道文件。后9位每3个一组，`rw-:u所有者``r--:g所属组``r--:o其他人`
		`r`读 `w`写 `x`执行 
		`.`:代表ACL权限
	3. `-d` 查看目录属性  
		<pre>
		# ls -ld /etc/
		drwxr-xr-x. 104 root root 12288 8月  28 00:42 /etc
		</pre>
	4. `-h` 人性化显示文件大小
		<pre>
		# ls -lh(人性化)
		总用量 44K
		-rw-------. 1 root root 1.3K 8月  27 23:03 anaconda-ks.cfg
		-rw-r--r--. 1 root root  27K 8月  27 23:03 install.log
		-rw-r--r--. 1 root root 7.4K 8月  27 23:01 install.log.syslog
		</pre>
	5. `-i` 显示inode  	
　　
- 新建目录 `mkdir -p [目录名]` (make directories)  	
	`-p` 递归创建 `mkdir -p 目录1/目录2/目录3`

- 切换所在目录 `cd [目录]` (change directory)
	- 简化操作
	`cd ~`或者`cd`	进入当前目录的家目录
	`cd -`		进入上次目录
	`cd ..`		进入上一级目录
	`cd .`		进入当前目录
	
	- 相对路径：参照当前所在目录，进行查找
	如：`# cd ../usr/local/src/`
	- 绝对路径：从根目录开始置顶，一级一级递归查找。在任何位置下，都能进入指定目录。
	如：`# cd /etc/`

- 查询所在目录位置 `pwd` (print working directory)

- 删除空目录 `rkdir [目录名]` (remove empty directories)

- 删除文件或目录 `rm` (remove)  
	`rm -rf [文件或目录]`
	`-r` 删除目录
	`-f` 强制

- 复制命令 `cp [选项] [原文件或目录] [目标目录]` (copy)
	选项
	- `-r` 复制目录
	- `-p` 连带文件属性复制
	- `-d` 若源文件是链接文件，则复制链接属性
	- `-a` 相当于 `-pdr`

- 剪切或改名命令 `mv [原文件或目录] [目标目录]` (move)
	剪切目录不需要加`-r`

### 链接命令 ###
- `ln -s [原文件] [目标文件]` (link)
- 功能描述：生成链接文件  
  选项：`-s` 创建软链接
　　
- 硬链接特性
 - 拥有相同的i节点和存储block块，可以看做是同一个文件
 - 可通过i节点识别
 - 不能跨分区
 - 不能针对目录使用  
- 软链接特性
 - 类似windows快捷方式
 - 软链接拥有自己的I节点和Block块，但是数据块中只保存原文件的文件名和I节点号，并没有实际的文件数据。
 - lrwxrwxrwx l为软连接标识，软链接文件权限都为rwxrwxrwx,对文件的真实权限须根据原文件。
 - 修改任意文件，另一个都改变
 - 删除原文件，软链接不能使用
 - 软链接要写绝对路径

----------

## 文件搜索命令 ##

- 文件搜索命令locate
- 命令搜索命令whereis与which
- 文件搜索命令find
- 字符串搜索命令grep
- find命令与grap命令区别

### locate命令 ###
- `locate 文件名`
  在后台数据库中按文件名搜索，搜索速度更快
- /var/lib/mlocate  
  #locate 命令所搜索的后台数据库，一天更新一次
- updatedb
  更新数据库
- 只能根据文件名搜索
- /etc/updatedb.conf配置文件
  - PRUNE_BIND_MOUNTS = 'yes' 开启搜索限制
  - PRUNEFS 搜索时，不搜索系统文件
  - PRUNENAMES 搜索时，不搜索的文件类型
  - PRUNEPATHS 搜索时，不搜索的路径

### whereis & which 命令 ###
搜索系统命令的命令
- `whereis [选项] 命令名`  
	#搜索命令所在路径及帮助文档所在位置  
	选项：  
		-b:只查看可执行文件  
		-m:只查看帮助文件
- `which 命令名`
  - 搜索命令所在路径
  - 文件别名(有则显示)

### find 命令 ###
- `find [搜索范围] [搜索条件]`
- `find / -name install.log`
 - 应避免大范围搜索，会非常耗费系统资源
 - find是在系统当中搜索完全符合条件的文件名。如果需要匹配，使用通配符匹配，通配符是完全匹配。
    - `*` 匹配任意内容
    - `?` 匹配任意一个字符
    - `[]` 匹配任意一个中括号内的字符
 - `find /root -iname install.log`  
  不区分大小写
- `find /root -user root`  
  按照所有者搜索
- `find /root -nouser`  
  没有所有者的文件，即垃圾文件，但除了以下两种情况：
    - 系统自己产生的文件
    - 外来文件(U盘拷贝等)
- `find /var/log -mtime +10`  
  查找10天前修改的文件
 - -10 10内修改的文件
 - 10  10天当天修改的文件
 - +10 10天前修改的文件
 - atime 文件访问时间
 - ctime 改变文件属性
 - mtime 修改文件内容
- `find . -size 25k`  
  查找文件大小是25k的文件
 - +25k 大于25k
 - 25k 等于25k
 - -25k 小于25k
 - 单位必须要加，`k`表示千字节,`M`表示兆字节
- `find /root inum 123456`  
  查找i节点是123456的文件
- `find /etc -size +20k -a -size -50k`  
  查找etc目录下，大于20k并且小于50k的文件
 - `-a` and，逻辑与，两个条件都满足
 - `-o` or,逻辑或，两个条件满足一个即可
- `find /etc -size +20k -a -size -50k -exec ls -lh {} \`  
  查找etc目录下，大于20k并且小于50k的文件,并显示详细信息
 - `-exec 命令 {} \` 固定格式，对搜索结果执行操作

### grep命令 ###
- `grep [选项] 字符串 文件名`  
  在文件中匹配附和条件的字符串  
  选项：
 - `-i` 忽略大小写
 - `-v` 排除指定字符串

### find与grep区别 ###
- find命令：在系统当中搜索完全符合条件的**文件名**。如果需要匹配，使用通配符匹配，通配符是完全匹配。
- grep命令：在文件当中搜索符合条件的**字符串**，如果需要匹配，则使用正则表达式进行匹配，正则表达式是包含匹配。




















----------

## 其他 ##
- `touch filename` 新建文件
- `echo $PATH` 显示环境变量
