---
title: Linux达人养成计划II
date: 2016-09-18 21:39:08 
categories: Linux
tags: Linux

---


## VIM编辑器 ##
### 概述 ###
- Visual Interface(可视化接口)
- VIM相对于VI做了提升
 - VIM支持多级撤销
 - VIM可以跨平台运行
 - VIM支持语法高亮
 - VIM支持图形界面

<!--more-->

### 操作模式 ###
- 模式
 - Command Mode 命令模式
 - Insert Mode 输入模式
 - Last Line Mode 底行模式（尾行，末行）
- `vim + filename` 定位到最后一行
- `vim +3 filename`定位到第三行
- `vim +/test filename`定位到第一次出现test的位置，按`n`寻找下一个
- `vim aa bb cc`一次性创建/打开多个文件，`:n`下个文件 `:N`上个文件(或者`:prev`)
- 其他常用指令
 - 底行模式常用指令
    - `:w`保存修改
    - `:q`退出vi编辑器
    - `:!`强制执行
    - `:wq`保存并退出
    - `:ls`列出所有打开的文件
    - `:13`快速定位到13行
    - `/xxx`从光标向后搜索到第一个xxx的位置，将光标移动至此
    - `？xxx`从光标向前搜索到第一个xxx的位置，将光标移动至此
 - 命令模式常用指令
    - `h`光标左移
    - `l`光标右移
    - `k`光标上移
    - `j`光标下移
    - `ctrl + f`向下翻页(front)
    - `ctrl + b`向上翻页(back)
    - `ctrl + d`向下翻半页(down)
    - `ctrl + u`向上翻半页(up)
    - `dd`删除光标所在行
    - `o`在光标所在行的下方插入一行并切换到输入模式
    - `yy`复制光标所在的行
    - `p`在光标所在行的下方粘贴
    - `P`在光标所在行的上方粘贴

![vim键位图](http://oc1kexygx.bkt.clouddn.com/linux/vim.jpg)

----------

## 磁盘管理 ##
### 磁盘管理基本命令 ###
- `df`查看磁盘分区使用状况
 - `-l` 仅显示本地磁盘（默认）
 - `-a` 显示所有文件系统的磁盘使用情况，包含比如/proc/
 - `-h` 以1024进制计算最合适的单位显示磁盘容量，默认kb
 - `-H` 以1000进制计算最合适的单位显示磁盘容量
 - `-T` 显示磁盘分区类型
 - `-t` 显示指定类型文件系统的磁盘分区
 - `-x` 不显示指定类型文件系统的磁盘分区

- `du`统计磁盘上文件的大小
 - `-b` 以byte为单位统计文件
 - `-k` 以kb为单位统计文件
 - `-m` 以mb为单位统计文件
 - `-h` 按照1024进制以最合适的单位统计文件
 - `-H` 按照1000进制以最合适的单位统计文件
 - `-s` 指定统计目标

### 磁盘分区与格式化 ###

- MBR分区
主分区不超过4个
单个分区容量最大2TB
 - `# fdisk -l`查看当前分区情况
 - `# fdisk /dev/sda`进入分区模式
    - `m`帮助
    - `n`添加分区
       - 分区类型
       - 分区编号
       - 扇区起始位置
       - 扇区终止位置(+3000M指定空间)
    - `p`已经添加的分区
    - `d`删除分区
    - `w`保存

- GPT
主分区个数‘几乎’没有限制(128个)
单个分区容量‘几乎’没有限制(18EB,1EB=1024PB,1PB=1024TB)
GPT的主分区中，不适合安装X86架构的系统(32位操作系统)
 - `parted`开始使用GPT分区模式
    - `help`帮助
    - `select /dev/sdb`使用某一块分区
    - `mklabel gpt`使用GPT分区模式(可以指定为MBR)
    - `print`打印分区信息
    - `print all`打印所有分区信息
    - `rm [分区编号]`删除分区
    - `unit GB`使用GB
 - **交互模式**
    - `mkpart`开始分区
       - 分区名称
       - 分区类型
       - 起始点，如果从0开始，会有4K对其的问题
       - 结束点
 - **命令模式**
    - `mkpart [name] [start] [end]`

- 分区格式化
 - `mkfs.ext3 /dev/sdb1`将sdb1格式化为ext3文件格式
 - `mkfs -t ext4 /dev/sdb2`将sdb2格式化为ext4文件格式

### 挂载分区 ###
1. 没有挂载无法使用，分区默认的挂载目录是/mnt目录；挂在到imooc目录下：mkdir -p /mnt/imooc
2. 挂载命令：mount /dev/sdb1 /mnt/挂载目录
3. 卸载命令：umount /mnt/挂载目录
4. 手动挂载的分区，不具有永久性，系统重启后，挂载就会失效
5. 重启系统自动挂载，需要修改 /etc/fstab文件：
vim + /etc/fstab
6. 添加配置

### SWAP交换分区 ###
1. 建立一个普通的Linux分区
2. 修改分区类型的16进制编码
 - `# fdisk /dev/sdb`进入MBR模式分区
    1. `p`查看
    2. `t`修改分区类型
    3. 指定哪一块重新分区
    4. 指定分区编码，十进制，输入L查看所有
3. 格式化交换分区
 - `# mkswap /dev/sdb6`
4. 启用交换分区
 - `# swapon /dev/sdb6`启用
 - `# swapoff /dev/sdb6`关闭
 - `free`查看swap分区加载状况

----------

## 用户管理 ##

### 用户和用户组 ###